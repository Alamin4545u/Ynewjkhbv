<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSKF - কুপতলা আলোকিত সমাজ ফাউন্ডেশন</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

    <style>
        body { font-family: 'Hind Siliguri', sans-serif; background: #f8fafc; color: #1e293b; }
        .glass-nav { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .premium-card { background: white; border-radius: 2.5rem; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.05); border: 1px solid rgba(255,255,255,0.7); transition: transform 0.3s ease; }
        .section-hide { display: none; }
        .btn-premium { background: linear-gradient(135deg, #10b981, #059669); color: white; box-shadow: 0 10px 20px rgba(16, 185, 129, 0.2); }
        
        /* ─── Modern Grid Certificate ─── */
        #certificateTemplate {
            width: 1000px;
            height: 700px;
            position: fixed;
            left: -9999px;
            font-family: 'Hind Siliguri', sans-serif;
            overflow: hidden;
            background: white;
            box-shadow: 0 0 60px rgba(0,0,0,0.12);
        }

        .cert-grid-container {
            height: 100%;
            display: grid;
            grid-template-rows: auto 1fr auto;
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 50%, #f1f5f9 100%);
        }

        .cert-header {
            position: relative;
            height: 120px;
            background: linear-gradient(to right, #065f46, #0f766e, #047857);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .cert-header::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url('https://www.transparenttextures.com/patterns/white-tiles.png');
            opacity: 0.12;
            pointer-events: none;
        }

        .cert-main {
            position: relative;
            padding: 3.5rem 4.5rem;
            display: grid;
            grid-template-rows: auto auto 1fr auto;
            gap: 1.75rem;
            text-align: center;
        }

        .cert-main::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url('https://www.transparenttextures.com/patterns/diamond-upholstery.png');
            opacity: 0.04;
            pointer-events: none;
        }

        .cert-name {
            font-size: 3.8rem;
            font-weight: 900;
            color: #0f172a;
            letter-spacing: -1.5px;
            border-bottom: 5px solid #059669;
            display: inline-block;
            padding-bottom: 0.5rem;
            line-height: 1.05;
        }

        .cert-body {
            font-size: 1.35rem;
            line-height: 1.7;
            color: #334155;
            max-width: 780px;
            margin: 0 auto;
            font-weight: 500;
        }

        .cert-seal-qr {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5rem;
            margin-top: 1.5rem;
        }

        .cert-footer {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            padding: 1.5rem 5rem 2.5rem;
            border-top: 1px solid rgba(203, 213, 225, 0.6);
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(8px);
            align-items: end;
        }

        .sig-line {
            width: 180px;
            height: 2px;
            background: #475569;
            margin: 0 auto 0.6rem;
        }

        .cert-id-badge {
            position: absolute;
            top: 1.5rem;
            right: 2.5rem;
            background: rgba(254, 243, 199, 0.9);
            backdrop-filter: blur(6px);
            border: 1px solid #f59e0b;
            color: #b45309;
            padding: 0.5rem 1.2rem;
            border-radius: 1rem;
            font-weight: 900;
            font-size: 0.95rem;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.15);
            transform: rotate(3deg);
        }
    </style>
</head>
<body>

    <!-- Navbar (আগের মতোই রাখা হয়েছে) -->
    <nav class="sticky top-0 z-50 glass-nav px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-2 cursor-pointer" onclick="showSection('home')">
            <div class="bg-green-600 p-2 rounded-2xl shadow-lg"><i data-lucide="shield-check" class="text-white w-5 h-5"></i></div>
            <span class="text-xl font-black italic tracking-tighter">BSKF.</span>
        </div>
        <div class="relative">
            <button id="profileBtn" class="bg-white border-2 border-slate-100 p-2 rounded-2xl shadow-sm hover:border-green-500 transition">
                <i data-lucide="user" class="w-6 h-6 text-slate-600"></i>
            </button>
            <div id="profileMenu" class="hidden absolute right-0 mt-3 w-56 bg-white rounded-3xl shadow-2xl border p-2 z-50 overflow-hidden">
                <div id="guestLinks" class="space-y-1">
                    <button onclick="showSection('login')" class="w-full text-left px-5 py-3 hover:bg-slate-50 rounded-2xl font-bold text-sm">লগইন</button>
                    <button onclick="showSection('register')" class="w-full text-left px-5 py-3 hover:bg-green-50 rounded-2xl font-bold text-sm text-green-600">নিবন্ধন</button>
                </div>
                <div id="userLinks" class="hidden space-y-1">
                    <button onclick="showSection('dashboard')" class="w-full text-left px-5 py-3 hover:bg-slate-50 rounded-2xl font-bold text-sm">ড্যাশবোর্ড</button>
                    <button onclick="logout()" class="w-full text-left px-5 py-3 hover:bg-red-50 text-red-600 rounded-2xl font-bold text-sm mt-1 border-t pt-4">লগআউট</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- মূল কন্টেন্ট (আগের মতোই রাখা হয়েছে – শুধু certificateTemplate অংশ বদলানো) -->
    <main class="max-w-4xl mx-auto p-6 space-y-10">
        <!-- Home, Register, Dashboard, Payment, History sections আগের মতোই থাকবে -->
        <!-- ............................................................ -->
        <!-- শুধু নিচের certificateTemplate অংশটি নতুন করে দেওয়া হলো -->

        <!-- PREMIUM CERTIFICATE TEMPLATE - MODERN GRID STYLE -->
        <div id="certificateTemplate">
            <div class="cert-grid-container">

                <!-- Header -->
                <div class="cert-header">
                    <div>
                        <h1 class="text-6xl font-black tracking-tight drop-shadow-lg">BSKF FOUNDATION</h1>
                        <p class="text-xl font-bold text-emerald-100 tracking-[0.35em] mt-1 uppercase">কুপতলা আলোকিত সমাজ ফাউন্ডেশন</p>
                    </div>
                    <div id="certID" class="cert-id-badge">ID: BSKF-0000</div>
                </div>

                <!-- Main Content -->
                <div class="cert-main">
                    <p class="text-2xl font-semibold text-slate-600 italic">This is to certify that</p>
                    
                    <div>
                        <div id="certName" class="cert-name">MEMBER NAME</div>
                    </div>

                    <div class="cert-body">
                        has been officially recognized as a <strong class="text-emerald-700 font-bold">verified and active member</strong> of 
                        <strong>BSKF Foundation</strong>.<br>
                        Their sincere commitment and contribution to building an enlightened and prosperous society in Kupatola is highly appreciated.
                    </div>

                    <div class="cert-seal-qr">
                        <img 
                            src="https://i.ibb.co/L6V6X4V/official-seal.png" 
                            onerror="this.src='https://cdn-icons-png.flaticon.com/512/3670/3670209.png'" 
                            class="w-40 opacity-95 drop-shadow-2xl"
                            alt="Official Seal"
                        >
                        <div class="text-center">
                            <div class="w-24 h-24 mx-auto bg-white border-4 border-slate-200 rounded-2xl flex items-center justify-center shadow-inner">
                                <i data-lucide="qr-code" class="w-16 h-16 text-slate-400"></i>
                            </div>
                            <p class="text-sm font-bold text-slate-500 mt-2 tracking-wider">VERIFIED</p>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="cert-footer">
                    <div class="text-center">
                        <div class="sig-line"></div>
                        <p class="font-bold text-base uppercase tracking-wider text-slate-700">Chairman</p>
                    </div>

                    <div class="text-center">
                        <p class="text-sm font-semibold text-emerald-700 tracking-widest">ISSUED ON</p>
                        <p class="text-base font-medium text-slate-600" id="certDate">--</p>
                    </div>

                    <div class="text-center">
                        <div class="sig-line"></div>
                        <p class="font-bold text-base uppercase tracking-wider text-slate-700">General Secretary</p>
                    </div>
                </div>

            </div>
        </div>

        <!-- বাকি সেকশনগুলো (login, register, dashboard ইত্যাদি) আগের মতোই থাকবে -->

    </main>

    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyDeFrZUu2ZwWzFa7owaC0v6WO_zP2lEJ1Q",
          authDomain: "firstdevloping.firebaseapp.com",
          projectId: "firstdevloping",
          storageBucket: "firstdevloping.firebasestorage.app",
          messagingSenderId: "197486624624",
          appId: "1:197486624624:web:2b7b055dc3ecbad20399b5"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        lucide.createIcons();

        let activeUser = null;

        // আগের সব ফাংশন একই থাকবে...

        function updateDashboardUI() {
            document.getElementById('dashName').innerText = activeUser.name;
            document.getElementById('dashID').innerText = 'ID: BSKF-' + activeUser.id;
            document.getElementById('dashNID').innerText = activeUser.nid;
            document.getElementById('dashPhone').innerText = activeUser.phone;
            
            document.getElementById('certName').innerText = activeUser.name;
            document.getElementById('certID').innerText = 'ID: BSKF-' + activeUser.id;

            // তারিখ আপডেট
            document.getElementById('certDate').innerText = new Date().toLocaleDateString('bn-BD', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            // বাকি কোড আগের মতো...
        }

        // downloadCertificate ফাংশন (আগের মতোই)
        function downloadCertificate() {
            const template = document.getElementById('certificateTemplate');
            const btn = event.currentTarget;
            btn.innerHTML = '<i data-lucide="loader" class="w-4 h-4 animate-spin"></i> Generating...';
            lucide.createIcons();
            
            html2canvas(template, {
                scale: 2.5,
                useCORS: true,
                allowTaint: true,
                backgroundColor: null
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `BSKF-Premium-Certificate-${activeUser.name.replace(/\s+/g, '_')}.png`;
                link.href = canvas.toDataURL("image/png");
                link.click();
                btn.innerHTML = '<i data-lucide="award" class="w-4 h-4"></i> Download Premium Certificate';
                lucide.createIcons();
            });
        }

        // বাকি সব ফাংশন (initApp, regForm, loginForm, payForm ইত্যাদি) আগের মতোই থাকবে
        // ............................................................

        initApp();
    </script>
</body>
</html>
